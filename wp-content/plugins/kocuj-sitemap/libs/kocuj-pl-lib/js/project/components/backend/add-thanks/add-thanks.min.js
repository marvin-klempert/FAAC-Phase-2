(function(){})();function kocujPLV12aCBackendAddThanks(){"use strict";var self=this;self._objHelper=kocujILV12aHelper;self._objAllJsAjax=kocujILV12aAllJsAjax;self._thisFilename=document.scripts[document.scripts.length-1].src;var vals=kocujPLV12aBackendAddThanksVals;if(vals.throwErrors!==undefined){if(vals.throwErrors==="1"){self._valsThrowErrors=true}else{self._valsThrowErrors=false}}self._valsPrefix=vals.prefix;self._valsPrefixKocujIL=vals.prefixKocujIL;self._valsSecurity=vals.security;self._valsWebsiteUrl=vals.websiteUrl;self._valsWebsiteTitle=vals.websiteTitle;self._valsWebsiteDescription=vals.websiteDescription;self._valsTextMoreInfoLink=vals.textMoreInfoLink;self._valsTextSending=vals.textSending;self._valsTextError=vals.textError;self._valsTextErrorNoRetries=vals.textErrorNoRetries;self._valsTextErrorAlreadyExists=vals.textErrorAlreadyExists;self._valsTextErrorWrongResponse1=vals.textErrorWrongResponse1;self._valsTextErrorWrongResponse2=vals.textErrorWrongResponse2;self._valsTextSuccess=vals.textSuccess;self._valsImageLoadingUrl=vals.imageLoadingUrl}kocujPLV12aCBackendAddThanks.prototype={_objHelper:null,_objAllJsAjax:null,_thisFilename:"",_prj:[],_valsThrowErrors:false,_valsPrefix:"",_valsPrefixKocujIL:"",_valsSecurity:"",_valsWebsiteUrl:"",_valsWebsiteTitle:"",_valsWebsiteDescription:"",_valsTextMoreInfoLink:"",_valsTextSending:"",_valsTextError:"",_valsTextErrorNoRetries:"",_valsTextErrorAlreadyExists:"",_valsTextErrorWrongResponse1:"",_valsTextErrorWrongResponse2:"",_valsTextSuccess:"",_valsImageLoadingUrl:"",_stylesSaved:false,_styles:"",addProject:function(projectId,windowFunction,projectApiUrl,projectApiLogin,projectApiPassword){"use strict";var args=this._checkAddProject(projectId,windowFunction,projectApiUrl,projectApiLogin,projectApiPassword);if(this._prj["prj_"+args.projectId]===undefined){this.addProjectIfNotExists(args.projectId,args.windowFunction,args.projectApiUrl,args.projectApiLogin,args.projectApiPassword)}else{this._throwError("PROJECT_ALREADY_EXISTS",args.projectId);return}},addProjectIfNotExists:function(projectId,windowFunction,projectApiUrl,projectApiLogin,projectApiPassword){"use strict";var args=this._checkAddProject(projectId,windowFunction,projectApiUrl,projectApiLogin,projectApiPassword);if(this._prj["prj_"+args.projectId]===undefined){this._prj["prj_"+args.projectId]={windowFunction:args.windowFunction,projectApiUrl:args.projectApiUrl,projectApiLogin:args.projectApiLogin,projectApiPassword:args.projectApiPassword,timer:null}}this._objAllJsAjax.addProjectIfNotExists(args.projectId)},getHTMLSelectorReviewMessageDiv:function(projectId){"use strict";projectId=this._parseProjectId(projectId);return"#"+this._getHTMLNameReviewMessageDiv(projectId)},getHTMLSelectorAddThanksStyle:function(projectId){"use strict";projectId=this._parseProjectId(projectId);return"#"+this._getHTMLNameAddThanksStyle(projectId)},getHTMLSelectorAddThanksReviewMessageMoreInfoLinkDiv:function(projectId){"use strict";projectId=this._parseProjectId(projectId);return"#"+this._getHTMLNameAddThanksReviewMessageMoreInfoLinkDiv(projectId)},getHTMLSelectorAddThanksReviewMessageMoreInfoLink:function(projectId){"use strict";projectId=this._parseProjectId(projectId);return this.getHTMLSelectorAddThanksReviewMessageMoreInfoLinkDiv(projectId)+" #"+this._getHTMLNameAddThanksReviewMessageMoreInfoLink(projectId)},getHTMLSelectorAddThanksReviewMessageSend:function(projectId){"use strict";projectId=this._parseProjectId(projectId);return"#"+this._getHTMLNameAddThanksReviewMessageSend(projectId)},getHTMLSelectorReviewMessageClose:function(projectId){"use strict";projectId=this._parseProjectId(projectId);return"#"+this._getHTMLNameReviewMessageClose(projectId)},getHTMLSelectorAddThanksReviewMessageLoadingImage:function(projectId){"use strict";projectId=this._parseProjectId(projectId);return"#"+this._getHTMLNameAddThanksReviewMessageLoadingImage(projectId)},getHTMLSelectorAddThanksPageAboutDiv:function(projectId){"use strict";projectId=this._parseProjectId(projectId);return"#"+this._getHTMLNameAddThanksPageAboutDiv(projectId)},getHTMLSelectorAddThanksPageAboutMoreInfoLink:function(projectId){"use strict";projectId=this._parseProjectId(projectId);return this.getHTMLSelectorAddThanksPageAboutDiv(projectId)+" #"+this._getHTMLNameAddThanksPageAboutMoreInfoLink(projectId)},getHTMLSelectorAddThanksPageAboutSend:function(projectId){"use strict";projectId=this._parseProjectId(projectId);return this.getHTMLSelectorAddThanksPageAboutDiv(projectId)+" #"+this._getHTMLNameAddThanksPageAboutSend(projectId)},getHTMLSelectorAddThanksPageAboutStatusDiv:function(projectId){"use strict";projectId=this._parseProjectId(projectId);return this.getHTMLSelectorAddThanksPageAboutDiv(projectId)+" #"+this._getHTMLNameAddThanksPageAboutStatusDiv(projectId)},getHTMLSelectorAddThanksPageAboutLoadingDiv:function(projectId){"use strict";projectId=this._parseProjectId(projectId);return this.getHTMLSelectorAddThanksPageAboutDiv(projectId)+" #"+this._getHTMLNameAddThanksPageAboutLoadingDiv(projectId)},setReviewMessageAddThanks:function(projectId){"use strict";var self=this;(function($){projectId=self._parseProjectId(projectId);$(self.getHTMLSelectorAddThanksReviewMessageMoreInfoLinkDiv(projectId)).html('<a href="#" id="'+self._getHTMLNameAddThanksReviewMessageMoreInfoLink(projectId)+'">'+self._valsTextMoreInfoLink+"</a>");var selectorAddThanksReviewMessageMoreInfoLink=$(self.getHTMLSelectorAddThanksReviewMessageMoreInfoLink(projectId));selectorAddThanksReviewMessageMoreInfoLink.attr("href","javascript:void(0);");selectorAddThanksReviewMessageMoreInfoLink.bind("click",{self:self},function(event){event.preventDefault();var fn=window[event.data.self._prj["prj_"+projectId].windowFunction];fn()});$(self.getHTMLSelectorAddThanksReviewMessageSend(projectId)).bind("click",{self:self,projectId:projectId},function(event){event.preventDefault();if(event.data.self._stylesSaved){$(event.data.self.getHTMLSelectorAddThanksStyle(projectId)).html(event.data.self._styles)}event.data.self._addThanks(event.data.projectId)})})(jQuery)},setPageAboutAddThanks:function(projectId){"use strict";var self=this;(function($){projectId=self._parseProjectId(projectId);var selectorAddThanksPageAboutMoreInfoLink=$(self.getHTMLSelectorAddThanksPageAboutMoreInfoLink(projectId));selectorAddThanksPageAboutMoreInfoLink.attr("href","javascript:void(0);");selectorAddThanksPageAboutMoreInfoLink.bind("click",{self:self},function(event){event.preventDefault();var fn=window[event.data.self._prj["prj_"+projectId].windowFunction];fn()});$(self.getHTMLSelectorAddThanksPageAboutSend(projectId)).bind("click",{self:self,projectId:projectId},function(event){event.preventDefault();event.data.self._addThanks(event.data.projectId)})})(jQuery)},ajaxAddThanksSuccessCallback:function(projectId,connectionId,data,status,obj){"use strict";var self=kocujPLV12aBackendAddThanks;(function($){var text=self._valsTextSuccess;if(data.status!==undefined&&data.status.id!==undefined){if(data.status.id!=="OK"){if(data.status.id==="CT_ADD_THANKS_URLALREADYEXISTS"){text=self._valsTextErrorAlreadyExists}else{self.ajaxAddThanksErrorCallback(projectId,connectionId,null,"api_error","");return}}}else{self.ajaxAddThanksErrorCallback(projectId,connectionId,null,"api_error","");return}self._removeReviewMessageLoadingImageElement(projectId);self._showReviewMessageCloseElement(projectId);self._objAllJsAjax.sendPost(projectId,"add_thanks_finished",ajaxurl,"text",{action:self._valsPrefix+"_"+projectId+"__add_thanks_finished",security:self._valsSecurity});var selectorAddThanksReviewMessageMoreInfoLinkDiv=$(self.getHTMLSelectorAddThanksReviewMessageMoreInfoLinkDiv(projectId));var selectorAddThanksPageAboutStatusDiv=$(self.getHTMLSelectorAddThanksPageAboutStatusDiv(projectId));if(selectorAddThanksReviewMessageMoreInfoLinkDiv.length>0){selectorAddThanksReviewMessageMoreInfoLinkDiv.html("<strong>"+text+"</strong>")}if(selectorAddThanksPageAboutStatusDiv.length>0){selectorAddThanksPageAboutStatusDiv.html("<strong>"+text+"</strong>");selectorAddThanksPageAboutStatusDiv.show();$(self.getHTMLSelectorAddThanksPageAboutLoadingDiv(projectId)).hide()}if($(self.getHTMLSelectorAddThanksReviewMessageSend(projectId)).length>0||$(self.getHTMLSelectorAddThanksPageAboutDiv(projectId)).length>0){self._prj["prj_"+projectId].timer=window.setTimeout(function(){window.clearTimeout(self._prj["prj_"+projectId].timer);self._prj["prj_"+projectId].timer=null;var selectorAddThanksReviewMessageSend=$(self.getHTMLSelectorAddThanksReviewMessageSend(projectId));var selectorAddThanksPageAboutDiv=$(self.getHTMLSelectorAddThanksPageAboutDiv(projectId));if(selectorAddThanksReviewMessageSend.length>0){selectorAddThanksReviewMessageSend.parent().fadeOut("slow",function(){selectorAddThanksReviewMessageSend.parent().remove()})}if(selectorAddThanksPageAboutDiv.length>0){selectorAddThanksPageAboutDiv.fadeOut("slow",function(){selectorAddThanksPageAboutDiv.remove()})}},5e3)}})(jQuery)},ajaxAddThanksErrorCallback:function(projectId,connectionId,obj,status,err){"use strict";var self=kocujPLV12aBackendAddThanks;(function($){self._removeReviewMessageLoadingImageElement(projectId);self._showReviewMessageCloseElement(projectId);if($(self.getHTMLSelectorAddThanksReviewMessageSend(projectId)).length>0){$(self.getHTMLSelectorAddThanksReviewMessageSend(projectId)).removeAttr("disabled")}if($(self.getHTMLSelectorAddThanksPageAboutSend(projectId)).length>0){$(self.getHTMLSelectorAddThanksPageAboutSend(projectId)).removeAttr("disabled")}var selectorAddThanksReviewMessageMoreInfoLinkDiv=$(self.getHTMLSelectorAddThanksReviewMessageMoreInfoLinkDiv(projectId));var selectorAddThanksPageAboutStatusDiv=$(self.getHTMLSelectorAddThanksPageAboutStatusDiv(projectId));var infoReview=self._valsTextErrorNoRetries;var infoPageAbout=infoReview;if(status==="api_error"){infoReview=self._valsTextErrorWrongResponse1+"<br />"+self._valsTextErrorWrongResponse2;infoPageAbout=self._valsTextErrorWrongResponse1+" "+self._valsTextErrorWrongResponse2}if(selectorAddThanksReviewMessageMoreInfoLinkDiv.length>0){selectorAddThanksReviewMessageMoreInfoLinkDiv.html("<strong>"+infoReview+"</strong>");if(status==="api_error"){self._styles=$(self.getHTMLSelectorAddThanksStyle(projectId)).html();$(self.getHTMLSelectorAddThanksStyle(projectId)).html(self._styles+"\n"+"."+self._valsPrefix+"_"+projectId+"__add_thanks_review_message_element_div {"+"\n"+"height:80px;"+"\n"+"}"+"\n"+"@media screen and (max-width: 782px) {"+"\n"+"."+self._valsPrefix+"_"+projectId+"__add_thanks_review_message_element_div {"+"\n"+"height:105px;"+"\n"+"}"+"\n"+"}");self._stylesSaved=true}}if(selectorAddThanksPageAboutStatusDiv.length>0){selectorAddThanksPageAboutStatusDiv.html("<strong>"+infoPageAbout+"</strong>");selectorAddThanksPageAboutStatusDiv.show();$(self.getHTMLSelectorAddThanksPageAboutLoadingDiv(projectId)).hide()}})(jQuery)},ajaxAddThanksRetryWaitCallback:function(projectId,connectionId,retries,obj,status,err){"use strict";var self=kocujPLV12aBackendAddThanks;(function($){self._removeReviewMessageLoadingImageElement(projectId);var selectorAddThanksReviewMessageMoreInfoLinkDiv=$(self.getHTMLSelectorAddThanksReviewMessageMoreInfoLinkDiv(projectId));var selectorAddThanksPageAboutStatusDiv=$(self.getHTMLSelectorAddThanksPageAboutStatusDiv(projectId));if(selectorAddThanksReviewMessageMoreInfoLinkDiv.length>0){selectorAddThanksReviewMessageMoreInfoLinkDiv.html("<strong>"+self._valsTextError+"</strong>")}if(selectorAddThanksPageAboutStatusDiv.length>0){selectorAddThanksPageAboutStatusDiv.html("<strong>"+self._valsTextError+"</strong>");selectorAddThanksPageAboutStatusDiv.show();$(self.getHTMLSelectorAddThanksPageAboutLoadingDiv(projectId)).hide()}})(jQuery)},ajaxAddThanksRetryNowCallback:function(projectId,connectionId,retries,obj,status,err){"use strict";var self=kocujPLV12aBackendAddThanks;(function($){self._changeElementsBeforeAddThanksAjaxSend(projectId)})(jQuery)},_getHTMLPrefix:function(projectId){"use strict";return this._valsPrefix+"_"+projectId+"__"},_getHTMLPrefixKocujIL:function(projectId){"use strict";return this._valsPrefixKocujIL+"_"+projectId+"__"},_getHTMLNameReviewMessageDiv:function(projectId){"use strict";return this._getHTMLPrefixKocujIL(projectId)+"message_review"},_getHTMLNameAddThanksStyle:function(projectId){"use strict";return this._getHTMLPrefix(projectId)+"add_thanks_review_message_style"},_getHTMLNameAddThanksReviewMessageMoreInfoLinkDiv:function(projectId){"use strict";return this._getHTMLPrefix(projectId)+"add_thanks_review_message_more_info_link_div"},_getHTMLNameAddThanksReviewMessageMoreInfoLink:function(projectId){"use strict";return this._getHTMLPrefix(projectId)+"add_thanks_review_message_more_info_link"},_getHTMLNameAddThanksReviewMessageSend:function(projectId){"use strict";return this._getHTMLPrefix(projectId)+"add_thanks_review_message_send"},_getHTMLNameReviewMessageClose:function(projectId){"use strict";return this._getHTMLPrefixKocujIL(projectId)+"review_message_close"},_getHTMLNameAddThanksReviewMessageLoadingImage:function(projectId){"use strict";return this._getHTMLPrefixKocujIL(projectId)+"add_thanks_review_message_loading_image"},_getHTMLNameAddThanksPageAboutDiv:function(projectId){"use strict";return this._getHTMLPrefix(projectId)+"add_thanks_page_about_div"},_getHTMLNameAddThanksPageAboutMoreInfoLink:function(projectId){"use strict";return this._getHTMLPrefix(projectId)+"add_thanks_page_about_more_info_link"},_getHTMLNameAddThanksPageAboutSend:function(projectId){"use strict";return this._getHTMLPrefix(projectId)+"add_thanks_page_about_send"},_getHTMLNameAddThanksPageAboutStatusDiv:function(projectId){"use strict";return this._getHTMLPrefix(projectId)+"add_thanks_page_about_status_div"},_getHTMLNameAddThanksPageAboutLoadingDiv:function(projectId){"use strict";return this._getHTMLPrefix(projectId)+"add_thanks_page_about_loading_div"},_parseProjectId:function(projectId){"use strict";projectId=this._objHelper.initString(projectId);if(projectId===""){this._throwError("EMPTY_PROJECT_ID");return}if(this._prj["prj_"+projectId]===undefined){this._throwError("PROJECT_DOES_NOT_EXIST",projectId);return}return projectId},_checkAddProject:function(projectId,windowFunction,projectApiUrl,projectApiLogin,projectApiPassword){"use strict";projectId=this._objHelper.initString(projectId);if(projectId===""){this._throwError("EMPTY_PROJECT_ID");return}windowFunction=this._objHelper.initString(windowFunction);if(windowFunction===""){this._throwError("ADD_THANKS_EMPTY_WINDOW_FUNCTION");return}projectApiUrl=this._objHelper.initString(projectApiUrl);if(projectApiUrl===""){this._throwError("ADD_THANKS_EMPTY_API_URL");return}projectApiLogin=this._objHelper.initString(projectApiLogin);if(projectApiLogin===""){this._throwError("ADD_THANKS_EMPTY_API_LOGIN");return}projectApiPassword=this._objHelper.initString(projectApiPassword);return{projectId:projectId,windowFunction:windowFunction,projectApiUrl:projectApiUrl,projectApiLogin:projectApiLogin,projectApiPassword:projectApiPassword}},_throwError:function(codeString,param){"use strict";codeString=this._objHelper.initString(codeString);if(codeString===""){return}param=this._objHelper.initString(param);if(this._valsThrowErrors){eval("throw new kocujPLV12aCException(kocujPLV12aExceptionCode."+codeString+", this._thisFilename, param);")}},_addThanks:function(projectId){"use strict";var self=this;(function($){projectId=self._parseProjectId(projectId);self._changeElementsBeforeAddThanksAjaxSend(projectId);self._objAllJsAjax.sendJson(projectId,"add_thanks",self._prj["prj_"+projectId].projectApiUrl,{requestType:"parameters",responseType:"JSON",requestMethod:"GET",data:{PARAMETER_version:1,header:{login:self._prj["prj_"+projectId].projectApiLogin,password:self._prj["prj_"+projectId].projectApiPassword},request:{PARAMETER_command:"ADD_THANKS",url:self._valsWebsiteUrl,title:self._valsWebsiteTitle,description:self._valsWebsiteDescription}}},{success:self.ajaxAddThanksSuccessCallback,error:self.ajaxAddThanksErrorCallback,retryWait:self.ajaxAddThanksRetryWaitCallback,retryNow:self.ajaxAddThanksRetryNowCallback})})(jQuery)},_changeElementsBeforeAddThanksAjaxSend:function(projectId){"use strict";var self=this;(function($){var selectorAddThanksReviewMessageSend=$(self.getHTMLSelectorAddThanksReviewMessageSend(projectId));var selectorAddThanksPageAboutSend=$(self.getHTMLSelectorAddThanksPageAboutSend(projectId));var selectorAddThanksReviewMessageMoreInfoLinkDiv=$(self.getHTMLSelectorAddThanksReviewMessageMoreInfoLinkDiv(projectId));var selectorAddThanksPageAboutStatusDiv=$(self.getHTMLSelectorAddThanksPageAboutStatusDiv(projectId));var selectorReviewMessageClose=$(self.getHTMLSelectorReviewMessageClose(projectId));if(selectorAddThanksReviewMessageSend.length>0){selectorAddThanksReviewMessageSend.attr("disabled",true)}if(selectorAddThanksPageAboutSend.length>0){selectorAddThanksPageAboutSend.attr("disabled",true)}if(selectorAddThanksReviewMessageMoreInfoLinkDiv.length>0){selectorAddThanksReviewMessageMoreInfoLinkDiv.html("<em>"+self._valsTextSending+"</em>")}if(selectorAddThanksPageAboutStatusDiv.length>0){selectorAddThanksPageAboutStatusDiv.html("<em>"+self._valsTextSending+"</em>");selectorAddThanksPageAboutStatusDiv.show();$(self.getHTMLSelectorAddThanksPageAboutLoadingDiv(projectId)).show()}if(selectorReviewMessageClose.length>0){selectorReviewMessageClose.hide();$(self.getHTMLSelectorReviewMessageDiv(projectId)).append('<div id="'+self._getHTMLNameAddThanksReviewMessageLoadingImage(projectId)+'" style="margin-left:5px;margin-bottom:5px;"><img src="'+self._valsImageLoadingUrl+'" alt="" /></div>')}})(jQuery)},_removeReviewMessageLoadingImageElement:function(projectId){"use strict";var self=this;(function($){if($(self.getHTMLSelectorAddThanksReviewMessageLoadingImage(projectId)).length>0){$(self.getHTMLSelectorAddThanksReviewMessageLoadingImage(projectId)).remove()}})(jQuery)},_showReviewMessageCloseElement:function(projectId){"use strict";var self=this;(function($){if($(self.getHTMLSelectorReviewMessageClose(projectId)).length>0){$(self.getHTMLSelectorReviewMessageClose(projectId)).show()}})(jQuery)}};var kocujPLV12aBackendAddThanks=new kocujPLV12aCBackendAddThanks;