(function($){$.ui.dialog.prototype.options.clickOut=true;$.ui.dialog.prototype.options.responsive=true;$.ui.dialog.prototype.options.scaleH=.8;$.ui.dialog.prototype.options.scaleW=.8;$.ui.dialog.prototype.options.showTitleBar=true;$.ui.dialog.prototype.options.showCloseButton=true;var _init=$.ui.dialog.prototype._init;$.ui.dialog.prototype._init=function(){var self=this;_init.apply(this,arguments);if($.ui&&$.ui.dialog&&$.ui.dialog.overlay){$.ui.dialog.overlay.events=$.map("focus,keydown,keypress".split(","),function(event){return event+".dialog-overlay"}).join(" ")}};var _open=$.ui.dialog.prototype.open;$.ui.dialog.prototype.open=function(){var self=this;_open.apply(this,arguments);var oHeight=self.element.parent().outerHeight(),oWidth=self.element.parent().outerWidth(),isTouch=$("html").hasClass("touch");var resize=function(){if(self.options.responsive===true||self.options.responsive==="touch"&&isTouch){var elem=self.element,wHeight=$(window).height(),wWidth=$(window).width(),dHeight=elem.parent().outerHeight(),dWidth=elem.parent().outerWidth(),setHeight=Math.min(wHeight*self.options.scaleH,oHeight),setWidth=Math.min(wWidth*self.options.scaleW,oWidth);if(oHeight+100>wHeight||elem.hasClass("resizedH")){elem.dialog("option","height",setHeight).parent().css("max-height",setHeight);elem.addClass("resizedH")}if(oWidth+100>wWidth||elem.hasClass("resizedW")){elem.dialog("option","width",setWidth).parent().css("max-width",setWidth);elem.addClass("resizedW")}if(elem.hasClass("resizedH")||elem.hasClass("resizedW")){elem.dialog("option","position","center");elem.css("overflow","auto")}}if(isTouch){elem.css("-webkit-overflow-scrolling","touch")}};resize();$(window).on("resize",function(){resize()});if(window.addEventListener){window.addEventListener("orientationchange",function(){resize()})}if(!self.options.showTitleBar){self.uiDialogTitlebar.css({height:0,padding:0,background:"none",border:0});self.uiDialogTitlebar.find(".ui-dialog-title").css("display","none")}if(!self.options.showCloseButton){self.uiDialogTitlebar.find(".ui-dialog-titlebar-close").css("display","none")}if(self.options.clickOut&&!self.options.modal){$('<div id="dialog-overlay"></div>').insertBefore(self.element.parent());$("#dialog-overlay").css({position:"fixed",top:0,right:0,bottom:0,left:0,"background-color":"transparent"});$("#dialog-overlay").click(function(e){e.preventDefault();e.stopPropagation();self.close()})}else if(self.options.clickOut&&self.options.modal){$(".ui-widget-overlay").click(function(e){self.close()})}if(self.options.dialogClass){$(".ui-widget-overlay").addClass(self.options.dialogClass)}};var _close=$.ui.dialog.prototype.close;$.ui.dialog.prototype.close=function(){var self=this;_close.apply(this,arguments);if(self.options.dialogClass){$(".ui-widget-overlay").removeClass(self.options.dialogClass)}if($("#dialog-overlay").length){$("#dialog-overlay").remove()}}})(jQuery);