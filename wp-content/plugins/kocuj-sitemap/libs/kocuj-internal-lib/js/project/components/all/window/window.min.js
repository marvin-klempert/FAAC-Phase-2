(function(){})();var kocujILV12aAllWindowType={STANDARD:0,AJAX:1,LAST:1};function kocujILV12aCAllWindow(){"use strict";var self=this;self._objHelper=kocujILV12aHelper;self._objAllJsAjax=kocujILV12aAllJsAjax;self._thisFilename=document.scripts[document.scripts.length-1].src;var vals=kocujILV12aAllWindowVals;if(vals.throwErrors==="1"){self._valsThrowErrors=true}else{self._valsThrowErrors=false}self._valsPrefix=vals.prefix;self._valsDialogCssUrl=vals.dialogCssUrl;self._valsTextLoading=vals.textLoading;self._valsTextLoadingError=vals.textLoadingError}kocujILV12aCAllWindow.prototype={_objHelper:null,_objAllJsAjax:null,_thisFilename:"",_prj:[],_valsThrowErrors:false,_valsPrefix:"",_valsDialogCssUrl:"",_valsTextLoading:"",_valsTextLoadingError:"",addProject:function(projectId){"use strict";var args=this._checkAddProject(projectId);if(this._prj["prj_"+args.projectId]===undefined){this.addProjectIfNotExists(args.projectId)}else{this._throwError("PROJECT_ALREADY_EXISTS",args.projectId);return}},addProjectIfNotExists:function(projectId){"use strict";var self=this;(function($){var args=self._checkAddProject(projectId);if(self._prj["prj_"+args.projectId]===undefined){self._prj["prj_"+args.projectId]={timer:null,cssLoaded:false,windowsTimers:[]};var stylesheet=$('<link id="'+self._getHTMLNameStylesheet(args.projectId)+'" rel="stylesheet" href="'+self._valsDialogCssUrl+'" type="text/css" media="all" />');stylesheet.load(function(){self._checkStylesheet(args.projectId)});$("head").append(stylesheet);$("body").prepend('<div id="'+self._getHTMLNameDummy(args.projectId)+'" class="ui-dialog" style="display:none;"></div>');if(!self._checkStylesheet(args.projectId)){self._prj["prj_"+args.projectId].timer=window.setInterval(function(){if(self._checkStylesheet(args.projectId)){window.clearInterval(self._prj["prj_"+args.projectId].timer);self._prj["prj_"+args.projectId].timer=null}},100)}}self._objAllJsAjax.addProjectIfNotExists(args.projectId)})(jQuery)},getHTMLSelectorStylesheet:function(projectId){"use strict";projectId=this._parseProjectId(projectId);return"#"+this._getHTMLNameStylesheet(projectId)},getHTMLSelectorDummy:function(projectId){"use strict";projectId=this._parseProjectId(projectId);return"#"+this._getHTMLNameDummy(projectId)},getHTMLSelectorWindow:function(projectId,windowId){"use strict";projectId=this._parseProjectId(projectId);windowId=this._objHelper.initString(windowId);return"#"+this._getHTMLNameWindow(projectId,windowId)},getHTMLSelectorContent:function(projectId,windowId){"use strict";projectId=this._parseProjectId(projectId);windowId=this._objHelper.initString(windowId);return"#"+this._getHTMLNameContent(projectId,windowId)},getHTMLSelectorContentInside:function(projectId,windowId){"use strict";projectId=this._parseProjectId(projectId);windowId=this._objHelper.initString(windowId);return"#"+this._getHTMLNameContentInside(projectId,windowId)},show:function(projectId,windowId,type,attr){"use strict";var self=this;(function($){projectId=self._parseProjectId(projectId);windowId=self._objHelper.initString(windowId);type=self._objHelper.initNumeric(type);if(type>kocujILV12aAllWindowType.LAST){self._throwError("WINDOW_WRONG_TYPE");return}attr=self._objHelper.initObject(attr);switch(type){case kocujILV12aAllWindowType.STANDARD:if(!("content"in attr)){self._throwError("WINDOW_WRONG_ATTRIBUTES");return}break;case kocujILV12aAllWindowType.AJAX:if(!("url"in attr)||!("ajaxData"in attr)){self._throwError("WINDOW_WRONG_ATTRIBUTES");return}break}if(self._checkStylesheet(projectId)){self._showWindow(projectId,windowId,type,attr)}else{self._prj["prj_"+projectId].windowsTimers["win_"+windowId]=window.setInterval(function(){if(self._checkStylesheet(projectId)){window.clearInterval(self._prj["prj_"+projectId].windowsTimers["win_"+windowId]);self._prj["prj_"+projectId].windowsTimers["win_"+windowId]=null;self._showWindow(projectId,windowId,type,attr)}},2e3)}})(jQuery)},ajaxSuccessCallback:function(projectId,connectionId,data,status,obj){"use strict";var self=kocujILV12aAllWindow;(function($){data=self._objHelper.initString(data);var tmp=connectionId.split("__");var windowId=tmp[tmp.length-1];$(self.getHTMLSelectorContentInside(projectId,windowId)).html(data)})(jQuery)},ajaxErrorCallback:function(projectId,connectionId,obj,status,err){"use strict";var self=kocujILV12aAllWindow;(function($){var tmp=connectionId.split("__");var windowId=tmp[tmp.length-1];$(self.getHTMLSelectorContentInside(projectId,windowId)).html(self._valsTextLoadingError)})(jQuery)},_getHTMLPrefix:function(projectId){"use strict";return this._valsPrefix+"_"+projectId+"__"},_getHTMLNameStylesheet:function(projectId){"use strict";return this._getHTMLPrefix(projectId)+"window_stylesheet"},_getHTMLNameDummy:function(projectId){"use strict";return this._getHTMLPrefix(projectId)+"window_dummy"},_getHTMLNameWindow:function(projectId,windowId){"use strict";return this._getHTMLPrefix(projectId)+"window__"+windowId},_getHTMLNameContent:function(projectId,windowId){"use strict";return this._getHTMLPrefix(projectId)+"window_content__"+windowId},_getHTMLNameContentInside:function(projectId,windowId){"use strict";return this._getHTMLPrefix(projectId)+"window_content_inside__"+windowId},_parseProjectId:function(projectId){"use strict";projectId=this._objHelper.initString(projectId);if(projectId===""){this._throwError("EMPTY_PROJECT_ID");return}if(this._prj["prj_"+projectId]===undefined){this._throwError("PROJECT_DOES_NOT_EXIST",projectId);return}return projectId},_checkAddProject:function(projectId){"use strict";projectId=this._objHelper.initString(projectId);if(projectId===""){this._throwError("EMPTY_PROJECT_ID");return}return{projectId:projectId}},_throwError:function(codeString,param){"use strict";codeString=this._objHelper.initString(codeString);if(codeString===""){return}param=this._objHelper.initString(param);if(this._valsThrowErrors){eval("throw new kocujILV12aCException(kocujILV12aExceptionCode."+codeString+", this._thisFilename, param);")}},_checkStylesheet:function(projectId){"use strict";if(this._prj["prj_"+projectId].cssLoaded){return true}var self=this;(function($){if($(self.getHTMLSelectorDummy(projectId)).css("position")==="absolute"){self._prj["prj_"+projectId].cssLoaded=true}})(jQuery);return this._prj["prj_"+projectId].cssLoaded},_showWindow:function(projectId,windowId,type,attr){"use strict";var self=this;(function($){if($(self.getHTMLSelectorWindow(projectId,windowId)).length!==0){$(self.getHTMLSelectorWindow(projectId,windowId)).remove()}$("body").append('<div id="'+self._getHTMLNameWindow(projectId,windowId)+'" style="padding:0;"><div id="'+self._getHTMLNameContent(projectId,windowId)+'" style="height:100%;padding:0;margin:0;overflow-x:hidden;overflow-y:scroll;"><div id="'+self._getHTMLNameContentInside(projectId,windowId)+'" style="padding:10px;"></div></div></div>');$(self.getHTMLSelectorContentInside(projectId,windowId)).html("");switch(type){case kocujILV12aAllWindowType.STANDARD:$(self.getHTMLSelectorContentInside(projectId,windowId)).html(attr.content);break;case kocujILV12aAllWindowType.AJAX:$(self.getHTMLSelectorContentInside(projectId,windowId)).html(self._valsTextLoading);break}if("contentCss"in attr){$.each(attr.contentCss,function(key,value){$(self.getHTMLSelectorContentInside(projectId,windowId)).css(key,value.split("&quot;").join('"'))})}$(self.getHTMLSelectorWindow(projectId,windowId)).dialog({width:attr.width,height:attr.height,title:attr.title,modal:true,draggable:false,resizable:false,responsive:true,show:"fade",hide:"fade",open:function(){$(".ui-widget-overlay").hide().fadeIn()},beforeClose:function(){$(".ui-widget-overlay").remove();$("<div />",{"class":"ui-widget-overlay"}).css({width:$(document).width(),height:$(document).height(),zIndex:1001}).appendTo("body").fadeOut(function(){$(this).remove()})}});$(self.getHTMLSelectorWindow(projectId,windowId)).parent().find(".ui-dialog-title").css({overflow:"hidden",display:"block",height:"100%"});if(type===kocujILV12aAllWindowType.AJAX){self._objAllJsAjax.sendPost(projectId,"window__"+windowId,attr.url,"text",attr.ajaxData,{success:self.ajaxSuccessCallback,error:self.ajaxErrorCallback})}})(jQuery)}};var kocujILV12aAllWindow=new kocujILV12aCAllWindow;