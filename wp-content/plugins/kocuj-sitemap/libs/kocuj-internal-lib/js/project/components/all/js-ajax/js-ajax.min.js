(function(){})();function kocujILV12aCAllJsAjax(){"use strict";var self=this;self._objHelper=kocujILV12aHelper;self._thisFilename=document.scripts[document.scripts.length-1].src;var vals=kocujILV12aAllJsAjaxVals;if(vals.throwErrors==="1"){self._valsThrowErrors=true}else{self._valsThrowErrors=false}self._valsPrefix=vals.prefix;self._valsSecurity=vals.security;if(vals.canUseProxy==="1"){self._valsCanUseProxy=true}else{self._valsCanUseProxy=false}self._valsAjaxUrl=vals.ajaxUrl}kocujILV12aCAllJsAjax.prototype={_objHelper:null,_thisFilename:"",_prj:[],_valsThrowErrors:false,_valsPrefix:"",_valsSecurity:"",_valsCanUseProxy:true,_valsAjaxUrl:"",addProject:function(projectId){"use strict";var args=this._checkAddProject(projectId);if(this._prj["prj_"+args.projectId]===undefined){this.addProjectIfNotExists(args.projectId)}else{this._throwError("PROJECT_ALREADY_EXISTS",args.projectId);return}},addProjectIfNotExists:function(projectId){"use strict";var args=this._checkAddProject(projectId);if(this._prj["prj_"+args.projectId]===undefined){this._prj["prj_"+args.projectId]=[]}},sendGet:function(projectId,connectionId,url,dataType,data,callbacks){"use strict";this.send(projectId,connectionId,url,"GET",dataType,data,callbacks)},sendPost:function(projectId,connectionId,url,dataType,data,callbacks){"use strict";this.send(projectId,connectionId,url,"POST",dataType,data,callbacks)},sendJson:function(projectId,connectionId,url,data,callbacks){"use strict";this.send(projectId,connectionId,url,"GET","jsonp",data,callbacks)},send:function(projectId,connectionId,url,method,dataType,data,callbacks){"use strict";var self=this;(function($){projectId=self._parseProjectId(projectId);connectionId=self._objHelper.initString(connectionId);url=self._objHelper.initString(url);if(url===""){self._throwError("JS_AJAX_EMPTY_URL");return}method=self._objHelper.initString(method);if(method===""){self._throwError("JS_AJAX_EMPTY_METHOD");return}dataType=self._objHelper.initString(dataType);if(dataType===""){self._throwError("JS_AJAX_EMPTY_DATA_TYPE");return}data=self._objHelper.initObject(data);if(data===""){data={}}callbacks=self._objHelper.initObject(callbacks);if(callbacks===""){callbacks={}}if(callbacks.error===undefined){callbacks.error=false}if(callbacks.retryWait===undefined){callbacks.retryWait=false}if(callbacks.retryNow===undefined){callbacks.retryNow=false}if(callbacks.success===undefined){callbacks.success=false}if(typeof self._prj["prj_"+projectId]["con_"+connectionId]!=="undefined"&&self._prj["prj_"+projectId]["con_"+connectionId].retries>0){self._deactivateTimer(projectId,connectionId)}if(typeof self._prj["prj_"+projectId]["con_"+connectionId]==="undefined"){self._prj["prj_"+projectId]["con_"+connectionId]={timer:null,retries:0}}if(typeof ajaxurl!=="undefined"&&url===ajaxurl){url=self._valsAjaxUrl}var isProxy=false;if(self._valsCanUseProxy&&url!==self._valsAjaxUrl){data._kocuj_internal_lib_proxy_url=url;data._kocuj_internal_lib_proxy_security=self._valsSecurity;if(typeof data.action!=="undefined"){data._kocuj_internal_lib_proxy_old_action=data.action}else{data._kocuj_internal_lib_proxy_old_action=""}data.action=self._valsPrefix+"_"+projectId+"__js_ajax";url=self._valsAjaxUrl;isProxy=true}if(url!==self._valsAjaxUrl){self._deactivateTimer(projectId,connectionId);self._prj["prj_"+projectId]["con_"+connectionId].timer=window.setTimeout(function(){self._error(projectId,connectionId,isProxy,callbacks.error,callbacks.retryWait,callbacks.retryNow,null,"timeout","")},3e4)}$.ajax({url:url,async:true,cache:false,data:data,dataType:dataType,error:function(obj,status,err){self._error(projectId,connectionId,isProxy,callbacks.error,callbacks.retryWait,callbacks.retryNow,new Array(projectId,connectionId,url,method,dataType,data,callbacks),obj,status,err)},success:function(data,status,obj){self._success(projectId,connectionId,isProxy,callbacks.success,data,status,obj)},timeout:3e4,type:method})})(jQuery)},_deactivateTimer:function(projectId,connectionId){"use strict";if(this._prj["prj_"+projectId]["con_"+connectionId].timer!==null){window.clearTimeout(this._prj["prj_"+projectId]["con_"+connectionId].timer);this._prj["prj_"+projectId]["con_"+connectionId].timer=null}},_success:function(projectId,connectionId,isProxy,callbackSuccess,data,status,obj){"use strict";var self=this;(function($){status=self._objHelper.initString(status);obj=self._objHelper.initObject(obj);if(obj===""){obj=null}self._prj["prj_"+projectId]["con_"+connectionId].retries=0;if(isProxy){self._deactivateTimer(projectId,connectionId)}if(callbackSuccess!==false){callbackSuccess(projectId,connectionId,data,status,obj)}})(jQuery)},_error:function(projectId,connectionId,isProxy,callbackError,callbackRetryWait,callbackRetryNow,sendMethodArguments,obj,status,err){"use strict";var self=this;(function($){obj=self._objHelper.initObject(obj);if(obj===""){obj=null}status=self._objHelper.initString(status);err=self._objHelper.initString(err);if(isProxy){self._deactivateTimer(projectId,connectionId)}++self._prj["prj_"+projectId]["con_"+connectionId].retries;if(self._prj["prj_"+projectId]["con_"+connectionId].retries<3){if(callbackRetryWait!==false){callbackRetryWait(projectId,connectionId,self._prj["prj_"+projectId]["con_"+connectionId].retries,obj,status,err)}self._prj["prj_"+projectId]["con_"+connectionId].timer=window.setTimeout(function(){if(callbackRetryNow!==false){callbackRetryNow(projectId,connectionId,self._prj["prj_"+projectId]["con_"+connectionId].retries,obj,status,err)}self.send(sendMethodArguments[0],sendMethodArguments[1],sendMethodArguments[2],sendMethodArguments[3],sendMethodArguments[4],sendMethodArguments[5],sendMethodArguments[6])},5e3);return}self._prj["prj_"+projectId]["con_"+connectionId].retries=0;if(callbackError!==false){callbackError(projectId,connectionId,obj,status,err)}})(jQuery)},_parseProjectId:function(projectId){"use strict";projectId=this._objHelper.initString(projectId);if(projectId===""){this._throwError("EMPTY_PROJECT_ID");return}if(this._prj["prj_"+projectId]===undefined){this._throwError("PROJECT_DOES_NOT_EXIST",projectId);return}return projectId},_checkAddProject:function(projectId){"use strict";projectId=this._objHelper.initString(projectId);if(projectId===""){this._throwError("EMPTY_PROJECT_ID");return}return{projectId:projectId}},_throwError:function(codeString,param){"use strict";codeString=this._objHelper.initString(codeString);if(codeString===""){return}param=this._objHelper.initString(param);if(this._valsThrowErrors){eval("throw new kocujILV12aCException(kocujILV12aExceptionCode."+codeString+", this._thisFilename, param);")}}};var kocujILV12aAllJsAjax=new kocujILV12aCAllJsAjax;