(function(){})();function kocujILV12aCBackendSettingsFieldsImage(){"use strict";var self=this;self._objHelper=kocujILV12aHelper;self._thisFilename=document.scripts[document.scripts.length-1].src;var vals=kocujILV12aBackendSettingsFieldsImageVals;if(vals.throwErrors==="1"){self._valsThrowErrors=true}else{self._valsThrowErrors=false}self._valsTextWindowTitle=vals.textWindowTitle;self._valsTextWindowButtonLabel=vals.textWindowButtonLabel}kocujILV12aCBackendSettingsFieldsImage.prototype={_objHelper:null,_thisFilename:"",_prj:[],_valsThrowErrors:false,_valsTextWindowTitle:"",_valsTextWindowButtonLabel:"",addProject:function(projectId,projectName){"use strict";var args=this._checkAddProject(projectId,projectName);if(this._prj["prj_"+args.projectId]===undefined){this.addProjectIfNotExists(args.projectId,args.projectName)}else{this._throwError("PROJECT_ALREADY_EXISTS",args.projectId);return}},addProjectIfNotExists:function(projectId,projectName){"use strict";var args=this._checkAddProject(projectId,projectName);if(this._prj["prj_"+args.projectId]===undefined){this._prj["prj_"+args.projectId]={projectName:args.projectName,fileFrame:null,wpMediaPostId:0,setToPostId:0}}},getHTMLSelectorImageContainer:function(projectId,fieldHtmlId){"use strict";projectId=this._parseProjectId(projectId);fieldHtmlId=this._objHelper.initString(fieldHtmlId);return"#"+this._getHTMLNameImageContainer(projectId,fieldHtmlId)},getHTMLSelectorUploadImageButton:function(projectId,fieldHtmlId){"use strict";projectId=this._parseProjectId(projectId);fieldHtmlId=this._objHelper.initString(fieldHtmlId);return"#"+this._getHTMLNameUploadImageButton(projectId,fieldHtmlId)},getHTMLSelectorImageId:function(projectId,fieldHtmlId){"use strict";projectId=this._parseProjectId(projectId);fieldHtmlId=this._objHelper.initString(fieldHtmlId);return"#"+this._getHTMLNameImageId(projectId,fieldHtmlId)},process:function(projectId,fieldHtmlId){"use strict";var self=this;(function($){projectId=self._parseProjectId(projectId);fieldHtmlId=self._objHelper.initString(fieldHtmlId);self._prj["prj_"+projectId].wpMediaPostId=wp.media.model.settings.post.id;$(self.getHTMLSelectorUploadImageButton(projectId,fieldHtmlId)).bind("click",{self:self,projectId:projectId,fieldHtmlId:fieldHtmlId},function(event){event.preventDefault();if(event.data.self._prj["prj_"+event.data.projectId].fileFrame!==null){event.data.self._prj["prj_"+event.data.projectId].fileFrame.uploader.uploader.param("post_id",$(self.getHTMLSelectorImageId(event.data.projectId,event.data.fieldHtmlId)).val());event.data.self._prj["prj_"+event.data.projectId].fileFrame.open();return}event.data.self._prj["prj_"+event.data.projectId].fileFrame=wp.media.frames.file_frame=wp.media({title:event.data.self._valsTextWindowTitle,button:{text:event.data.self._valsTextWindowButtonLabel},library:{type:"image"},multiple:false});event.data.self._prj["prj_"+event.data.projectId].fileFrame.on("select",function(){var attachment=event.data.self._prj["prj_"+event.data.projectId].fileFrame.state().get("selection").first().toJSON();$(event.data.self.getHTMLSelectorImageContainer(event.data.projectId,event.data.fieldHtmlId)).attr("src",attachment.url).css("width","auto");$(event.data.self.getHTMLSelectorImageId(event.data.projectId,event.data.fieldHtmlId)).val(attachment.id);wp.media.model.settings.post.id=event.data.self._prj["prj_"+event.data.projectId].wpMediaPostId});event.data.self._prj["prj_"+event.data.projectId].fileFrame.open()})})(jQuery)},_getHTMLNameImageContainer:function(projectId,fieldHtmlId){"use strict";return fieldHtmlId+"__image_preview"},_getHTMLNameUploadImageButton:function(projectId,fieldHtmlId){"use strict";return fieldHtmlId+"__image_upload"},_getHTMLNameImageId:function(projectId,fieldHtmlId){"use strict";return fieldHtmlId+"__image_hidden"},_parseProjectId:function(projectId){"use strict";projectId=this._objHelper.initString(projectId);if(projectId===""){this._throwError("EMPTY_PROJECT_ID");return}if(this._prj["prj_"+projectId]===undefined){this._throwError("PROJECT_DOES_NOT_EXIST",projectId);return}return projectId},_checkAddProject:function(projectId,projectName){"use strict";projectId=this._objHelper.initString(projectId);if(projectId===""){this._throwError("EMPTY_PROJECT_ID");return}projectName=this._objHelper.initString(projectName);return{projectId:projectId,projectName:projectName}},_throwError:function(codeString,param){"use strict";codeString=this._objHelper.initString(codeString);if(codeString===""){return}param=this._objHelper.initString(param);if(this._valsThrowErrors){eval("throw new kocujILV12aCException(kocujILV12aExceptionCode."+codeString+", this._thisFilename, param);")}}};var kocujILV12aBackendSettingsFieldsImage=new kocujILV12aCBackendSettingsFieldsImage;